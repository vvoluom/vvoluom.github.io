<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Vitaly Volozhinov</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.">
    <meta name="keywords" content="your keywords, separated by commas" />
    <meta name="author" content="Volozhinov Vitaly">
    <link rel="canonical" href="http://localhost:4000/">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">

    <!-- Custom CSS & Bootstrap Core CSS - Uses Bootswatch Flatly Theme: http://bootswatch.com/flatly/ -->
    <link rel="stylesheet" href="/style.css">

    <!-- Google verification -->
    

    <!-- Bing Verification -->
    

    <!-- Custom Fonts -->
    <link rel="stylesheet" href="/css/font-awesome/css/font-awesome.min.css">
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

    <body id="page-top" class="index">
       <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#page-top">Vitaly Volozhinov</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a href="#page-top"></a>
                    </li>
                    <li class="page-scroll">
                        <a href="#portfolio">Portfolio</a>
                    </li>
                    <li class="page-scroll">
                        <a href="#about">About</a>
                    </li>
                    <li class="page-scroll">
                        <a href="#contact">Contact</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>
        <!-- Header -->
    <header>
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <img class="img-responsive" src="img/profile.png" alt="">
                    <div class="intro-text">
                        <span class="name">Vitaly Volozhinov</span>
                        <hr class="star-light">
                        <span class="skills">A.I - Blockchain - DevOps</span>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Portfolio Grid Section -->
    <section id="portfolio">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>Portfolio</h2>
                    <hr class="star-primary">
                </div>
            </div>
            <div class="row">
                
                    <div class="col-sm-4 portfolio-item">
                        <a href="#portfolioModal-1" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                </div>
                            </div>
                            <img src="img/portfolio/cabin.png" class="img-responsive" alt="image-alt">
                        </a>
                    </div>
                
                    <div class="col-sm-4 portfolio-item">
                        <a href="#portfolioModal-2" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                </div>
                            </div>
                            <img src="img/portfolio/cake.png" class="img-responsive" alt="image-alt">
                        </a>
                    </div>
                
                    <div class="col-sm-4 portfolio-item">
                        <a href="#portfolioModal-3" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                </div>
                            </div>
                            <img src="img/portfolio/circus.png" class="img-responsive" alt="image-alt">
                        </a>
                    </div>
                
                    <div class="col-sm-4 portfolio-item">
                        <a href="#portfolioModal-4" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                </div>
                            </div>
                            <img src="img/portfolio/game.png" class="img-responsive" alt="image-alt">
                        </a>
                    </div>
                
                    <div class="col-sm-4 portfolio-item">
                        <a href="#portfolioModal-6" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                </div>
                            </div>
                            <img src="img/portfolio/submarine.png" class="img-responsive" alt="image-alt">
                        </a>
                    </div>
                
                    <div class="col-sm-4 portfolio-item">
                        <a href="#portfolioModal-5" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                </div>
                            </div>
                            <img src="img/portfolio/safe.png" class="img-responsive" alt="image-alt">
                        </a>
                    </div>
                
            </div>
        </div>
    </section>
     <!-- About Section -->
    <section class="success" id="about">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>About</h2>
                    <hr class="star-light">
                </div>
            </div>
            <div class="row">
                <div class="col-lg-4 col-lg-offset-2">
                    <p>Freelancer is a free bootstrap theme created by Start Bootstrap. The download includes the complete source files including HTML, CSS, and JavaScript as well as optional LESS stylesheets for easy customization.</p>
                </div>
                <div class="col-lg-4">
                    <p>Whether you're a student looking to showcase your work, a professional looking to attract clients, or a graphic artist looking to share your projects, this template is the perfect starting point! </p>
                </div>
                <div class="col-lg-8 col-lg-offset-2 text-center">
                    <a href="https://github.com/jeromelachaud/freelancer-theme" class="btn btn-lg btn-outline">
                        <i class="fa fa-download"></i> Download Theme
                    </a>
                </div>
            </div>
        </div>
    </section>


    
    <!-- Contact Section -->
<section id="contact">
	<div class="container">
		<div class="row">
			<div class="col-lg-12 text-center">
				<h2>Contact Me</h2>
				<hr class="star-primary">
			</div>
		</div>
		<div class="row">
			<div class="col-lg-8 col-lg-offset-2">
				<form  action="//formspree.io/vitalyvolozhinov@gmail.com" method="POST" name="sentMessage" id="contactForm" novalidate>
					<div class="row control-group">
						<div class="form-group col-xs-12 floating-label-form-group controls">
							<label for="name">Name</label>
							<input type="text" name="name" class="form-control" placeholder="Name" id="name" required data-validation-required-message="Please enter your name.">
							<p class="help-block text-danger"></p>
						</div>
					</div>
					<div class="row control-group">
						<div class="form-group col-xs-12 floating-label-form-group controls">
							<label for="email">Email Address</label>
							<input type="email" name="_replyto" class="form-control" placeholder="Email Address" id="email" required data-validation-required-message="Please enter your email address.">
							<p class="help-block text-danger"></p>
						</div>
					</div>
					<div>
						<input type="hidden"  name="_subject" value="New submission!">
						<input type="text" name="_gotcha" style="display:none" />
					</div>
					<div class="row control-group">
						<div class="form-group col-xs-12 floating-label-form-group controls">
							<label for="message">Message</label>
							<textarea rows="5" name="message" class="form-control" placeholder="Message" id="message" required data-validation-required-message="Please enter a message."></textarea>
							<p class="help-block text-danger"></p>
						</div>
					</div>
					<br>
					<div id="success"></div>
					<div class="row">
						<div class="form-group col-xs-12">
							<button type="submit" class="btn btn-success btn-lg">Send</button>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</section>

    

        <!-- Footer -->
    <footer class="text-center">
        <div class="footer-above">
            <div class="container">
                <div class="row">
                    <div class="footer-col col-md-4">
                        <h3></h3>
                        <p>
                            
                        </p>
                    </div>
                    <div class="footer-col col-md-4">
                        <h3></h3>
                        <ul class="list-inline">
                            
                            <li>
                                <a href="http://github.com/vvoluom" class="btn-social btn-outline"><i class="fa fa-fw fa-github"></i></a>
                            </li>
		                    
                            <li>
                                <a href="https://www.linkedin.com/in/vitaly-volozhinov/" class="btn-social btn-outline"><i class="fa fa-fw fa-linkedin"></i></a>
                            </li>
		                    
                        </ul>
                    </div>
                    <div class="footer-col col-md-4">
                        <h3></h3>
                        <p>This is a free to use, open source Bootstrap theme created by <a href="http://startbootstrap.com">Start Bootstrap</a>.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-below">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        Copyright &copy;  2020
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
    <div class="scroll-top page-scroll visible-xs visible-sm">
        <a class="btn btn-primary" href="#page-top">
            <i class="fa fa-chevron-up"></i>
        </a>
    </div>

     <!-- Portfolio Modals -->
 
    <div class="portfolio-modal modal fade" id="portfolioModal-1" tabindex="-1" role="dialog" aria-hidden="true">
        <div>
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div>
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div>
                            <h2>Project 1</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/cabin.png" class="img-responsive img-centered" alt="image-alt">
                            
                                <div>
</div>
                            
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Start Bootstrap</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">April 2014</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">Web Development</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-2" tabindex="-1" role="dialog" aria-hidden="true">
        <div>
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div>
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div>
                            <h2>Project 2</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/cake.png" class="img-responsive img-centered" alt="image-alt">
                            
                                <div>
</div>
                            
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Start Bootstrap</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">April 2014</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">Web Development</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-3" tabindex="-1" role="dialog" aria-hidden="true">
        <div>
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div>
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div>
                            <h2>Project 3</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/circus.png" class="img-responsive img-centered" alt="image-alt">
                            
                                <div>
</div>
                            
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Start Bootstrap</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">April 2014</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">Web Development</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-4" tabindex="-1" role="dialog" aria-hidden="true">
        <div>
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div>
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div>
                            <h2>Project 4</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/game.png" class="img-responsive img-centered" alt="image-alt">
                            
                                <div>
</div>
                            
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Start Bootstrap</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">April 2014</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">Web Development</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-6" tabindex="-1" role="dialog" aria-hidden="true">
        <div>
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div>
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div>
                            <h2>LinkPal</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/submarine.png" class="img-responsive img-centered" alt="image-alt">
                            
                                <div><h1 id="decentralized-eth-escrow-for-ethfiat-trading-using-paypal">Decentralized ETH escrow for ETH/FIAT trading using PayPal.</h1>

<h2 id="abstract">Abstract</h2>
<p>Ethereum based smart contracts have no way to communicate with outside data which makes them limited in the ability to verify the information that is being given to them. The Chainlink network provides 
a reliable tamper-proof way to input and retrieve data from these smart contracts. Using this new technology LinkPal was created with the purpose of trading ETH for Fiat and vice versa without having to trust either party or a centralised provider. All the transactions are done through the smart contract and the PayPal verifications are done by Chainlink’s decentralised oracles.</p>

<h2 id="introduction">Introduction</h2>
<p>This project was done as a hackathon submission for the Coinlist Chainlink hackathon. The problem that is solved by LinkPal is the “Who goes first” problem while transacting digital goods online during Peer-to-Peer trading. It also removes having to trust a centralised authority to facilitate your data and payments. This solution currently only uses PayPal which is prone to the abuse of chargebacks, other payment methods will be incorporated in the future.</p>

<h2 id="background">Background</h2>
<h1 id="ethereum">Ethereum</h1>
<p>Ethereum is a decentralised platform for smart contracts built using blockchain technology. It is currently run using a Proof of Work (POW) consensus mechanism where transactions are confirmed by miners solving cryptographic hashes to gain rewards. ETH is a cryptocurrency which is used to deploy, trade and run functions on the platform.</p>

<h1 id="smart-contracts">Smart Contracts</h1>
<p>Smart Contracts provide the ability to execute tamper-proof digital agreements, which are considered highly secure and highly reliable. Smart contracts on the Ethereum Blockchain are coded using the programming language Solidity which is high-level and object-oriented.</p>

<h1 id="chainlink">Chainlink</h1>
<p>Chainlink facilitates the retrieval of reliable and tamper-proof information from and to smart contracts. It does this in a decentralised way by sending and retrieving information from multiple nodes. The data that is received by the majority of the nodes is what the smart contract agrees on as the correct data. Chainlink uses LINK tokens as their cryptocurrency to execute data transactions on their nodes.</p>

<h1 id="metamask">Metamask</h1>

<h1 id="paypal">PayPal</h1>
<p>PayPal is an e-commerce compnay that facilitates payments between parties through online funds transfers.</p>

<h2 id="methodology">Methodology</h2>
<h1 id="paypal-invoice">PayPal Invoice</h1>
<p>A seller must first go to <a href="https://www.paypal.com/invoice/create">PayPal - Create an Invoice</a> and create an invoice which would specify the asking price for the ETH that is to be sold. Once the invoice is the created the ID should be taken from the link such as given this invoice https://www.paypal.com/invoice/p/#QLUP832ZATHFAZ3Q the ID that needs to be inputted into the smart contract is  <strong>QLUP832ZATHFAZ3Q</strong>.</p>

<h1 id="smart-contract">Smart Contract</h1>
<p>The design utilized was the Factory Method where the factory produces objects containing all the necessary functions, details and funds to make the exchange happen. A seller would need to enter the amount of ETH they are going to sell for the price specified in the invoice, the Invoice ID, the Ethereum Address of the Buyer and finally the Chainlink Oracle Nodes and their Job Id’s. All of this can be seen in the picture of the form below.</p>

<p><img src="../images/LinkPal/sellerFormOne.png" alt="linearly separable data" /></p>

<p>Those parameters are what the seller needs to input but Metamask handles the input of other unseen parameters such as seller’s Ethereum address(msg.sender) and the ETH he is sending to the contract (msg.value). On creation the contract also takes note of the time it was created, this is needed for the clause that if a Buyer doesn’t pay the invoice for a certain amount of time say one day the Seller can withdraw their ETH.</p>

<p>The ETH is automatically transfered from the Factory to the deployed contract on creation. Once the contract is deployed it’s address is stored under two mapped arrays, one for the sellers and the other for the buyers to make it easier for both parties to keep track of their agreements. The code below shows the deployment of the contract and the storage of it’s address.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">//Creation of LinkPal Agreement</span>
  <span class="n">address</span> <span class="nc">LinkPalAddress</span> <span class="o">=</span> <span class="o">(</span><span class="k">new</span> <span class="nc">LinkPal</span><span class="o">).</span><span class="na">value</span><span class="o">(</span><span class="n">address</span><span class="o">(</span><span class="k">this</span><span class="o">).</span><span class="na">balance</span><span class="o">)(</span>
             <span class="n">_invoiceID</span><span class="o">,</span>
            <span class="n">msg</span><span class="o">.</span><span class="na">sender</span><span class="o">,</span>
            <span class="n">_buyerAddress</span><span class="o">,</span>
            <span class="n">msg</span><span class="o">.</span><span class="na">value</span><span class="o">,</span>
            <span class="n">_jobIds</span><span class="o">,</span>
            <span class="n">_oracles</span>
        <span class="o">);</span>
  
  <span class="c1">//Storing the address of that LinkPal Agreement</span>
  <span class="nc">LinkPalAddressesSeller</span><span class="o">[</span><span class="n">msg</span><span class="o">.</span><span class="na">sender</span><span class="o">].</span><span class="na">push</span><span class="o">(</span><span class="nc">LinkPalAddress</span><span class="o">);</span>
  <span class="nc">LinkPalAddressesBuyer</span><span class="o">[</span><span class="n">_buyerAddress</span><span class="o">].</span><span class="na">push</span><span class="o">(</span><span class="nc">LinkPalAddress</span><span class="o">);</span>
</code></pre></div></div>

<p>Once the contract is deployed the buyer can now check the contract’s details to see if there is infact ETH deposited inside it and what the deadline for seller’s withdrawal is. If everything looks fine then they could pay the PayPal invoice, fund the contract with LINK tokens and request confirmations. The Chainlink nodes selected by the Seller will parse the Invoice ID and retrieve the key value pair {paid : bool} which would be True or False depending if the invoice was paid or not. If True then the funds are released from the smart contract and the buyer can withdraw them. The figure below shows how a deployed contract would look to a Seller. The amounts need to be changed to be more readable as the ETH amount is in Wei and the Created time is in block time seconds.</p>

<p><img src="../images/LinkPal/deployedLinkPal.png" alt="linearly separable data" /></p>

<p>This is the contract from the Seller/Buyer’s perspective.</p>

<p><img src="../images/LinkPal/buyerDeployedLinkPal.png" alt="linearly separable data" /></p>

<p>These are the Buyer’s options:</p>

<ul>
  <li>Deposit Link  : Fund the contract with LINK tokens.</li>
  <li>Query Oracles : Use the LINK tokens to retrieve data from the oracles.</li>
  <li>Withdraw LINK : Withdraw any unused LINK the contract may have.</li>
  <li>Withdraw ETH  : Withdraw the ETH that has just been sold to you on the condition that the invoice was paid and the oracles queried it.</li>
</ul>

<p>The code snippet below shows how requests can be built to confirm if the invoice had been paid or not. The truecount/falsecount variables are used to keep track of the {paid : bool} response from the oracles. The function then iterates through the array of Oracles and sends requests to them with the PayPal Invoice ID.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">function</span> <span class="nf">requestConfirmations</span><span class="o">()</span> <span class="kd">public</span> <span class="n">buyerSellerContract</span><span class="o">{</span>
    <span class="c1">//Reset them to 0 to be able to safely re-run the oracles</span>
    <span class="n">trueCount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="n">falseCount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

    <span class="c1">//Loop to iterate through all the responses from different nodes</span>
    <span class="k">for</span><span class="o">(</span><span class="n">uint</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">oracles</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
        <span class="nc">Chainlink</span><span class="o">.</span><span class="na">Request</span> <span class="n">memory</span> <span class="n">req</span> <span class="o">=</span> <span class="n">buildChainlinkRequest</span><span class="o">(</span><span class="n">stringToBytes32</span><span class="o">(</span><span class="n">jobIds</span><span class="o">[</span><span class="n">i</span><span class="o">]),</span> <span class="k">this</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">fulfillNodeRequest</span><span class="o">.</span><span class="na">selector</span><span class="o">);</span>
        <span class="n">req</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"invoice_id"</span><span class="o">,</span> <span class="n">invoiceID</span><span class="o">);</span>
        <span class="n">sendChainlinkRequestTo</span><span class="o">(</span><span class="n">oracles</span><span class="o">[</span><span class="n">i</span><span class="o">],</span> <span class="n">req</span><span class="o">,</span> <span class="no">ORACLE_PAYMENT</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>The fulfillNodeRequest() function expects the requestId and a boolean “paid” from each node that a request has been sent to. The boolean decides which counter to increment and after each increment it decides if the invoice should be released or not. It might seem inefficient having to run the released if statement every time it receives information and that having it run once after the for loop in requestConfirmations() is better but the confirmations are retrieved and increments are done after the function requestConfirmations() therefore released will not update.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">function</span> <span class="nf">fulfillNodeRequest</span><span class="o">(</span><span class="n">bytes32</span> <span class="n">_requestId</span><span class="o">,</span> <span class="n">bool</span> <span class="n">paid</span><span class="o">)</span>
    <span class="kd">public</span>
    <span class="nf">recordChainlinkFulfillment</span><span class="o">(</span><span class="n">_requestId</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">paid</span> <span class="o">==</span> <span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">trueCount</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>
        <span class="o">}</span><span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">paid</span> <span class="o">==</span> <span class="kc">false</span><span class="o">){</span>
            <span class="n">falseCount</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">if</span><span class="o">(</span><span class="n">trueCount</span> <span class="o">&gt;</span> <span class="n">falseCount</span><span class="o">){</span>
            <span class="n">released</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">emit</span> <span class="nf">successNodeResponse</span><span class="o">(</span><span class="n">released</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre></div></div>

<p>The withdrawETH() function allows a buyer or a seller to withdraw the Ethereum escrowed inside the contract. If a buyer doesn’t pay the invoice then after one day the seller can withdraw the ETH. Otherwise if a buyer does pay the invoice, then after running node confirmations the ETH will be released to the buyer. The contract sends the stored ETH to whoever is eligible to access this function.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">function</span> <span class="nf">withdrawETH</span><span class="o">()</span> <span class="kd">public</span> <span class="n">buyerSellerContract</span> <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="n">msg</span><span class="o">.</span><span class="na">sender</span> <span class="o">==</span> <span class="n">sellerAddress</span> <span class="o">&amp;&amp;</span> <span class="n">deploymentTime</span> <span class="o">&lt;=</span> <span class="n">block</span><span class="o">.</span><span class="na">timestamp</span> <span class="o">+</span> <span class="mi">1</span> <span class="n">days</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">trueCount</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">falseCount</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)){</span>
            <span class="k">if</span><span class="o">(</span><span class="n">released</span> <span class="o">==</span> <span class="kc">false</span><span class="o">){</span>
                <span class="n">address</span><span class="o">(</span><span class="n">msg</span><span class="o">.</span><span class="na">sender</span><span class="o">).</span><span class="na">transfer</span><span class="o">(</span><span class="n">amount</span><span class="o">);</span>
                <span class="n">amount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span><span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">msg</span><span class="o">.</span><span class="na">sender</span> <span class="o">==</span> <span class="n">buyerAddress</span> <span class="o">&amp;&amp;</span> <span class="n">released</span> <span class="o">==</span> <span class="kc">true</span><span class="o">){</span>
            <span class="n">address</span><span class="o">(</span><span class="n">msg</span><span class="o">.</span><span class="na">sender</span><span class="o">).</span><span class="na">transfer</span><span class="o">(</span><span class="n">amount</span><span class="o">);</span>
            <span class="n">amount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre></div></div>

<p>The withdrawLink() function allows for users to withdraw the unused LINK token inside the contract.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">function</span> <span class="nf">withdrawLink</span><span class="o">()</span> <span class="kd">public</span> <span class="n">buyerSellerContract</span><span class="o">{</span>
        <span class="nc">LinkTokenInterface</span> <span class="n">link</span> <span class="o">=</span> <span class="nc">LinkTokenInterface</span><span class="o">(</span><span class="n">chainlinkTokenAddress</span><span class="o">());</span>
        <span class="n">require</span><span class="o">(</span><span class="n">link</span><span class="o">.</span><span class="na">transfer</span><span class="o">(</span><span class="n">msg</span><span class="o">.</span><span class="na">sender</span><span class="o">,</span> <span class="n">link</span><span class="o">.</span><span class="na">balanceOf</span><span class="o">(</span><span class="n">address</span><span class="o">(</span><span class="k">this</span><span class="o">))),</span> <span class="s">"Unable to transfer"</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre></div></div>

<p>The demo is live on <a href="http://www.linkpal.io/">linkpal.io</a>.</p>
</div>
                            
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Start Bootstrap</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">Novemeber 2019</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">Blockchain</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-5" tabindex="-1" role="dialog" aria-hidden="true">
        <div>
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div>
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div>
                            <h2>Project 5</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/safe.png" class="img-responsive img-centered" alt="image-alt">
                            
                                <div>
</div>
                            
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Start Bootstrap</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">April 2014</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">Web Development</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

     <!-- jQuery Version 1.11.0 -->
    <script src="/js/jquery-1.11.0.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/js/bootstrap.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="/js/jquery.easing.min.js"></script>
    <script src="/js/classie.js"></script>
    <script src="/js/cbpAnimatedHeader.js"></script>

    <!-- Contact Form JavaScript -->
    <script src="/js/jqBootstrapValidation.js"></script>
    
    <script src="/js/contact_me_static.js"></script>
    

    <!-- Custom Theme JavaScript -->
    <script src="/js/freelancer.js"></script>

    

    </body>
</html>